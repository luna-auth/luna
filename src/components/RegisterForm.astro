---
import { actions, isInputError } from "astro:actions";

const result = Astro.getActionResult(actions.register);
const inputErrors = isInputError(result?.error) ? result.error.fields : {};
---

<form method="POST" action={actions.register}>
    <label>
        Email:
        <input
            type="email"
            name="email"
            required
        />
        {
            inputErrors.email && (
                <span style="color: red;">{inputErrors.email.join(", ")}</span>
            )
        }
    </label>
    <label>
        Password:
        <input type="password" name="password" required />
        {
            inputErrors.password && (
                <span style="color: red;">
                    {inputErrors.password.join(", ")}
                </span>
            )
        }
    </label>
    <button type="submit">Register</button>
</form>
{result && result.error && <p style="color: red;">{result.error.message}</p>}
{
    result && !result.error && (
        <p>Registration successful! You are now logged in.</p>
    )
}
