---
import { actions } from 'astro:actions';
import Layout from '../layouts/Layout.astro';
import RegisterForm from '../components/RegisterForm.astro';

if (Astro.locals.user) {
  return Astro.redirect('/');
}

const result = Astro.getActionResult(actions.auth.register);
if (result?.data?.success) {
  // Registration successful, redirect to homepage
  return Astro.redirect('/');
}
---

<Layout title="Register">
  <RegisterForm />
</Layout>
