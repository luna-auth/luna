---
import { actions } from 'astro:actions';
import Layout from '../layouts/Layout.astro';
import LoginForm from '../components/LoginForm.astro';

if (Astro.locals.user) {
  return Astro.redirect('/');
}

const result = Astro.getActionResult(actions.auth.login);
if (result?.data?.success) {
  // Login successful, redirect to homepage
  return Astro.redirect('/');
}
---

<Layout title="Login">
  <LoginForm />
</Layout>
